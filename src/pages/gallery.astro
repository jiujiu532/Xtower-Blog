---
import MainGridLayout from "@/layouts/MainGridLayout.astro";
import { Icon } from "astro-icon/components";
import { url } from "@/utils/url-utils";

// 定义相册数据
const albums = [
  {
    id: "wallpapers",
    title: "精屏8K壁纸",
    description: "网速较慢可能导致无法加载图片或加载缓慢，请耐心等待。",
    cover: url("/assets/images/gallery/【哲风壁纸】二次元背景-初音未来.png"),
    count: 72,
    date: "2025/12/2",
    tags: ["8K壁纸", "ACGN", "精屏壁纸"]
  },
  {
    id: "avatars",
    title: "Avatar",
    description: "一些头像图片。",
    cover: url("/images/avatars/136171144_p0.png"),
    count: 5,
    date: "2025/12/2",
    tags: ["头像", "Avatar"]
  }
];

// 壁纸图片列表
const wallpaperFiles = [
  "1.jpg", "1.png", "132931108_p0.jpg", "exif-frame-blur-1753347774987.jpg",
  "【哲风壁纸】AI-AI美女-佳人.png", "【哲风壁纸】AI-AI美女.png",
  "【哲风壁纸】eva-EVA明日香.png", "【哲风壁纸】eva-二次元.png",
  "【哲风壁纸】eva-动漫 (1).png", "【哲风壁纸】eva-动漫元素.png",
  "【哲风壁纸】eva-动漫角色.png", "【哲风壁纸】eva-动漫角色1.png",
  "【哲风壁纸】eva-日系动漫.png", "【哲风壁纸】EVA动漫-动漫角色.png",
  "【哲风壁纸】Fate系列-二次元.png", "【哲风壁纸】Re零角色-二次元美少女.png",
  "【哲风壁纸】Wallpaper-动漫人物.png", "【哲风壁纸】WLOP-宇宙.png",
  "【哲风壁纸】一个人-海.png", "【哲风壁纸】三人组-二次元.png",
  "【哲风壁纸】三月七-二次元.png", "【哲风壁纸】两种色调的头发-动漫女孩.png",
  "【哲风壁纸】个性插画-渔网袜少女.png", "【哲风壁纸】乡村小道-乡村暮色.png",
  "【哲风壁纸】二次元-二次元角色.png", "【哲风壁纸】二次元-人物集合.png",
  "【哲风壁纸】二次元-兽耳娘-动漫.png", "【哲风壁纸】二次元-动漫-夜景.png",
  "【哲风壁纸】二次元-动漫.png", "【哲风壁纸】二次元-动漫眼睛.png",
  "【哲风壁纸】二次元-动漫角色.png", "【哲风壁纸】二次元-卧室.png",
  "【哲风壁纸】二次元-古风建筑.png", "【哲风壁纸】二次元-少女.png",
  "【哲风壁纸】二次元少女-夜间泳池.png", "【哲风壁纸】二次元背景-初音未来.png",
  "【哲风壁纸】二次元角色-动漫少女.png", "【哲风壁纸】人物-剪影-动漫.png",
  "【哲风壁纸】人物-场景.png", "【哲风壁纸】光影-动漫-少女.png",
  "【哲风壁纸】全员-后藤一里.png", "【哲风壁纸】列车过站-动漫人物.png",
  "【哲风壁纸】初音-水中.png", "【哲风壁纸】初音未来-动漫角色.png",
  "【哲风壁纸】初音未来-虚拟歌姬.png", "【哲风壁纸】剪影-动漫-月光.png",
  "【哲风壁纸】动漫-动漫少女.png", "【哲风壁纸】动漫-精选.png",
  "【哲风壁纸】动漫-落叶.png", "【哲风壁纸】动漫人物-动漫壁纸.png",
  "【哲风壁纸】动漫场景-动漫壁纸.png", "【哲风壁纸】动漫场景-好好吃的饭.png",
  "【哲风壁纸】动漫少女-樱花庄.png", "【哲风壁纸】动漫美女-夏日-少女.png",
  "【哲风壁纸】动漫角色-卡提希娅.png", "【哲风壁纸】动漫角色-名侦探柯南.png",
  "【哲风壁纸】动漫角色-楪祈.png", "【哲风壁纸】卡提希娅-卡提希娅角色.png",
  "【哲风壁纸】双马尾-朝日六花.png", "【哲风壁纸】哥特建筑-守岸人.png",
  "【哲风壁纸】唯美-少女.png", "【哲风壁纸】夕阳-夕阳少女-少女.png",
  "【哲风壁纸】奇幻场景-少女.png", "【哲风壁纸】孤独摇滚-波奇酱.png",
  "【哲风壁纸】少女-校园背景.png", "【哲风壁纸】恋柱-鬼灭之刃.png",
  "【哲风壁纸】拼接背景-电锯人.png", "【哲风壁纸】插画-暗黑风格.png",
  "【哲风壁纸】插画-曲_出水芙蓉.png", "【哲风壁纸】明日香-红色.png",
  "【哲风壁纸】楪祈-白色连衣裙.png", "【哲风壁纸】瞳-红色.png"
];

// 头像图片列表
const avatarFiles = [
  "136171144_p0.png",
  "imgi_16_95580281_p0_square1200.jpg",
  "imgi_64_132508876_p0.png",
  "imgi_65_135916837_p0.png",
  "jiu.jpg"
];
---

<MainGridLayout title="图库" description="记录生活中的美好瞬间">
  <div class="card-base p-6">
    <h1 class="text-2xl font-bold mb-2 flex items-center gap-2">
      <span class="w-1 h-6 bg-[var(--primary)] rounded-full"></span>
      图库
    </h1>
    <p class="text-neutral-500 mb-6">记录生活中的美好瞬间</p>

    <!-- 相册列表视图 -->
    <div id="album-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {albums.map((album) => (
        <div 
          class="album-card card-base overflow-hidden cursor-pointer transition-all hover:shadow-lg"
          data-album-id={album.id}
        >
          <div class="aspect-video overflow-hidden bg-neutral-100 dark:bg-neutral-800">
            <img 
              src={album.cover}
              alt={album.title}
              class="w-full h-full object-cover transition-transform duration-300 hover:scale-110"
            />
          </div>
          <div class="p-4">
            <h3 class="text-xl font-bold mb-2">{album.title}</h3>
            <p class="text-sm text-neutral-500 mb-3 line-clamp-2">{album.description}</p>
            <div class="flex items-center gap-4 text-sm text-neutral-400 mb-3">
              <span class="flex items-center gap-1">
                <Icon name="fa6-solid:image" class="text-xs" />
                {album.count} 张图片
              </span>
              <span class="flex items-center gap-1">
                <Icon name="fa6-solid:calendar" class="text-xs" />
                {album.date}
              </span>
            </div>
            <div class="flex gap-2 flex-wrap">
              {album.tags.map((tag) => (
                <span class="px-2 py-1 text-xs rounded-md bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400">
                  {tag}
                </span>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- 壁纸相册详情 -->
    <div id="wallpapers-detail" class="album-detail hidden">
      <button class="back-btn flex items-center gap-2 mb-4 text-neutral-600 dark:text-neutral-400 hover:text-[var(--primary)] transition-colors">
        <Icon name="fa6-solid:arrow-left" />
        返回相册列表
      </button>
      <h2 class="text-xl font-bold mb-2">精屏8K壁纸</h2>
      <p class="text-sm text-neutral-400 mb-4">{wallpaperFiles.length} 张图片 · 2025/12/2</p>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
        {wallpaperFiles.map((img) => (
          <a 
            href={url(`/assets/images/gallery/${encodeURIComponent(img)}`)}
            target="_blank"
            class="group aspect-video bg-neutral-100 dark:bg-neutral-800 rounded-lg overflow-hidden relative cursor-pointer"
          >
            <img 
              src={url(`/assets/images/gallery/${encodeURIComponent(img)}`)}
              alt=""
              class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center">
              <Icon name="fa6-solid:expand" class="text-white text-xl opacity-0 group-hover:opacity-100 transition-opacity" />
            </div>
          </a>
        ))}
      </div>
    </div>

    <!-- 头像相册详情 -->
    <div id="avatars-detail" class="album-detail hidden">
      <button class="back-btn flex items-center gap-2 mb-4 text-neutral-600 dark:text-neutral-400 hover:text-[var(--primary)] transition-colors">
        <Icon name="fa6-solid:arrow-left" />
        返回相册列表
      </button>
      <h2 class="text-xl font-bold mb-2">Avatar</h2>
      <p class="text-sm text-neutral-400 mb-4">{avatarFiles.length} 张图片 · 2025/12/2</p>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
        {avatarFiles.map((img) => (
          <a 
            href={url(`/images/avatars/${encodeURIComponent(img)}`)}
            target="_blank"
            class="group aspect-square bg-neutral-100 dark:bg-neutral-800 rounded-lg overflow-hidden relative cursor-pointer"
          >
            <img 
              src={url(`/images/avatars/${encodeURIComponent(img)}`)}
              alt=""
              class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center">
              <Icon name="fa6-solid:expand" class="text-white text-xl opacity-0 group-hover:opacity-100 transition-opacity" />
            </div>
          </a>
        ))}
      </div>
    </div>
  </div>
</MainGridLayout>

<style>
  .aspect-video {
    aspect-ratio: 16 / 9;
  }
  .aspect-square {
    aspect-ratio: 1 / 1;
  }
  .album-detail.hidden {
    display: none;
  }
  .album-card {
    transition: transform 0.2s;
  }
  .album-card:hover {
    transform: translateY(-4px);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const albumList = document.getElementById('album-list');
    const albumCards = document.querySelectorAll('.album-card');
    const backBtns = document.querySelectorAll('.back-btn');

    // 点击相册卡片
    albumCards.forEach(card => {
      card.addEventListener('click', () => {
        const albumId = card.getAttribute('data-album-id');
        const detailSection = document.getElementById(`${albumId}-detail`);
        
        if (detailSection) {
          albumList?.classList.add('hidden');
          detailSection.classList.remove('hidden');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    });

    // 点击返回按钮
    backBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const detailSections = document.querySelectorAll('.album-detail');
        detailSections.forEach(section => section.classList.add('hidden'));
        albumList?.classList.remove('hidden');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
  });
</script>
